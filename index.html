<!DOCTYPE html>
<html>

<body>
    <label for="paintcolor">Select a paint color:</label>
    <input type="color" id="paintcolor" name="paintcolor" value="#ff0000">
    <br>
    <canvas id="myCanvas" width="300" height="300" style="border:1px solid black"></canvas>

    <script>
        const rowLength = 10
        const colLength = 10
        const canvas = document.getElementById("myCanvas");
        const ledWidth = canvas.width / rowLength
        const ledHeight = canvas.height / colLength
        const ctx = canvas.getContext("2d");
        var mouseDown = 0;

        canvas.addEventListener('mousedown', function (event) {
            mouseDown = 1
            console.log(mouseDown)
        });
        canvas.addEventListener('mouseup', function (event) {
            mouseDown = 0;
            console.log(mouseDown)
        });

        function getCursorPosition(canvas, event) {
            const rect = canvas.getBoundingClientRect()
            const x = event.clientX - rect.left
            const y = event.clientY - rect.top
            return [x, y]
        }

        function lightLed(canvas, event) {
            let [x, y] = getCursorPosition(canvas, event);
            ctx.beginPath();
            ctx.fillStyle = document.getElementById("paintcolor").value;
            const row = Math.floor(y / ledHeight)
            const col = Math.floor(x / ledWidth)
            ctx.fillRect(col * ledWidth, row * ledHeight, ledWidth, ledHeight);
            ctx.rect(col * ledWidth, row * ledHeight, ledWidth, ledHeight);
            ctx.stroke();
        }

        canvas.addEventListener('click', function (event) {
            lightLed(canvas, event)
        });

        canvas.addEventListener('mouseout', function (event) {
            mouseDown = 0
        });

        canvas.addEventListener('mousemove', function (event) {
            if (mouseDown) {
                lightLed(canvas, event)
            }
        });

        ctx.lineWidth = "2";
        ctx.strokeStyle = "black";
        ctx.beginPath();

        for (var row = 0; row < colLength; ++row) {
            for (var col = 0; col < rowLength; ++col) {
                ctx.rect(col * ledWidth, row * ledHeight, ledWidth, ledHeight);
            }
        }
        ctx.stroke();
    </script>
</body>

</html>